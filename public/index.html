<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Insurance</title>
    <link rel="stylesheet" href="css/app.css">
</head>
<body>
    <div class="header">
        <div class="tab active" id="work-tab" data-tab="work">Work</div>
        <div class="tab" id="saved-tab" data-tab="saved">Saved</div>
    </div>

    <div class="container">
        <!-- Work Tab Content -->
        <div id="work-tab-content" class="tab-content active">
            <!-- Input Section -->
            <div class="input-section">
                <div class="input-row">
                    <input type="text" id="firm-names-input" placeholder="Enter firm names here (comma separated)" 
                           value="American Discovery Capital, NexPhase Capital, Revelstoke Capital">
                </div>
                <div class="upload-area" id="upload-area">
                    <div>üìÅ Upload a list of firms here</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">Drag & drop or click to browse</div>
                    <input type="file" id="file-input" accept=".csv,.txt" style="display: none;">
                </div>
                <div class="button-row">
                    <button class="btn btn-primary" id="start-btn">Start</button>
                    <button class="btn btn-secondary" id="clear-btn">Clear</button>
                    <label style="display: flex; align-items: center; margin-left: 20px;">
                        <input type="checkbox" class="checkbox" id="auto-complete-checkbox" checked> Auto-complete workflow
                    </label>
                </div>
            </div>

            <!-- Pipeline Results Container -->
            <div id="pipeline-results">
                <!-- Pipeline cards will be inserted here dynamically -->
            </div>
        </div>

        <!-- Saved Tab Content -->
        <div id="saved-tab-content" class="tab-content">
            <div class="page-header">
                <h2>Previously Run Pipelines</h2>
                <p>View and manage your saved pipeline results</p>
            </div>

            <!-- Saved Pipeline Results Container -->
            <div id="saved-pipeline-results">
                <!-- Saved pipeline cards will be inserted here dynamically -->
            </div>

            <!-- Load More Section -->
            <div class="load-more" id="load-more" style="display: none;">
                <p>Showing recent <span id="shown-count">0</span> pipelines. <a href="#" id="load-more-btn">Load more...</a></p>
            </div>
        </div>

        <!-- Report Configuration Modal (Hidden initially) -->
        <div id="report-config-modal" class="modal-overlay">
            <div class="modal-content">
                <h3>Generate Report</h3>
                
                <div class="config-section">
                    <div class="config-title">Output Format</div>
                    <div class="checkbox-group">
                        <label><input type="radio" name="format" value="excel" checked> Excel</label>
                        <label><input type="radio" name="format" value="pdf"> PDF</label>
                        <label><input type="radio" name="format" value="csv"> CSV</label>
                    </div>
                </div>

                <div class="config-section">
                    <div class="config-title">Include in Report</div>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="include-company-info" checked> Company Information</label>
                        <label><input type="checkbox" id="include-insurance" checked> Insurance Carriers</label>
                        <label><input type="checkbox" id="include-financial" checked> Financial Data</label>
                        <label><input type="checkbox" id="include-legal"> Legal Entity Details</label>
                    </div>
                </div>

                <div class="config-section">
                    <div class="config-title">Filters</div>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="exclude-exited"> Exclude Exited Companies</label>
                        <label><input type="checkbox" id="min-employees"> Minimum 100 Employees</label>
                    </div>
                </div>

                <div class="button-row">
                    <button class="btn btn-success" id="generate-report-btn">Generate Report</button>
                    <button class="btn btn-secondary" id="cancel-report-btn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">Processing...</div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    
    <!-- Base Components -->
    <script src="js/components/base/BaseComponent.js"></script>
    <!-- StatusPollingManager skipped for initial refactor -->

    <!-- Pipeline Components -->
    <script src="js/components/pipeline/PipelineHeader.js"></script>
    <script src="js/components/pipeline/PipelineStats.js"></script>
    <script src="js/components/pipeline/ProgressInfo.js"></script>
    <script src="js/components/pipeline/ActionButtons.js"></script>
    <script src="js/components/pipeline/PipelineCard.js"></script>

    <!-- Company Components -->
    <script src="js/components/company/CompanyHeader.js"></script>
    <script src="js/components/company/CompanyDetails.js"></script>
    <script src="js/components/company/Form5500Card.js"></script>
    <script src="js/components/company/CompanyCard.js"></script>
    <script src="js/components/company/CompanyList.js"></script>

    <!-- Form Components -->
    <script src="js/components/forms/AddCompanyForm.js"></script>

    <!-- Main Manager -->
    <script src="js/pipeline-cards.js"></script>
    
    <script src="js/tabs.js"></script>
    <script src="js/company-manager.js"></script>
    <script src="js/report-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>